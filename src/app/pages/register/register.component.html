<div class="container my-5 py-5 shadow rounded-3">
  <div class="w-75 mx-auto">
    <h1 class="text-main">Register Now :</h1>
    <form [formGroup]="registerForm" (ngSubmit)="register(registerForm)">
      <div class="form-group mb-3">
        <label for="fullName">FullName</label>
        <input
          formControlName="name"
          type="text"
          id="fullName"
          class="form-control shadow-sm"
        />
        <div
          class="alert alert-danger mt-2"
          *ngIf="
            registerForm.get('name')?.errors &&
            registerForm.get('name')?.touched
          "
        >
          <p *ngIf="registerForm.get('name')?.errors?.['required']" class="m-0">
            Required
          </p>
          <p
            *ngIf="registerForm.get('name')?.getError('maxlength')"
            class="m-0"
          >
            Max characters: 15
          </p>
          <p
            *ngIf="registerForm.get('name')?.getError('minlength')"
            class="m-0"
          >
            Min characters: 2
          </p>
        </div>
      </div>
      <div class="form-group mb-3">
        <label for="email">Email</label>
        <input
          formControlName="email"
          type="email"
          id="email"
          class="form-control shadow-sm"
        />
        <div
          class="alert alert-danger mt-2"
          *ngIf="
            registerForm.get('email')?.errors &&
            registerForm.get('email')?.touched
          "
        >
          <p
            *ngIf="registerForm.get('email')?.getError('required')"
            class="m-0"
          >
            Required
          </p>
          <p *ngIf="registerForm.get('email')?.getError('email')" class="m-0">
            Incorrect email format
          </p>
        </div>
      </div>
      <div class="form-group mb-3">
        <label for="password">Password</label>
        <div class="input-group">
          <input
            formControlName="password"
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            class="form-control shadow-sm fs-6 border-end-0"
          />
          <button
            class="btn btn-outline-secondary border-start-0 border-1 border-secondary border-opacity-25"
            type="button"
            (click)="togglePasswordVisibility('password')"
          >
            <i class="fa fa-eye" *ngIf="!showPassword"></i>
            <i class="fa fa-eye-slash" *ngIf="showPassword"></i>
          </button>
        </div>
        <div
          class="alert alert-danger mt-2"
          *ngIf="
            registerForm.get('password')?.errors &&
            registerForm.get('password')?.touched
          "
        >
          <p
            *ngIf="registerForm.get('password')?.getError('required')"
            class="m-0"
          >
            Required
          </p>
          <p
            *ngIf="registerForm.get('password')?.getError('pattern')"
            class="m-0"
          >
            Password should start with a capital letter and contain 6 to 13
            characters
          </p>
        </div>
      </div>

      <div class="form-group mb-3">
        <label for="rePassword">Confirm Password</label>
        <div class="input-group">
          <input
            formControlName="rePassword"
            [type]="showRepassword ? 'text' : 'password'"
            id="rePassword"
            class="form-control shadow-sm fs-6 border-end-0"
          />
          <button
            class="btn btn-outline-secondary border-start-0 border-1 border-secondary border-opacity-25"
            type="button"
            (click)="togglePasswordVisibility('repassword')"
          >
            <i class="fa fa-eye" *ngIf="!showRepassword"></i>
            <i class="fa fa-eye-slash" *ngIf="showRepassword"></i>
          </button>
        </div>
        <div
          class="alert alert-danger mt-2"
          *ngIf="
            registerForm.get('rePassword')?.errors &&
            registerForm.get('rePassword')?.touched
          "
        >
          <p
            *ngIf="registerForm.get('rePassword')?.getError('required')"
            class="m-0"
          >
            Required
          </p>
          <p
            *ngIf="registerForm.get('rePassword')?.getError('mismatch')"
            class="m-0"
          >
            Passwords don't match!
          </p>
        </div>
      </div>
      <div class="form-group mb-3">
        <label for="phone">Phone</label>
        <input
          formControlName="phone"
          type="tel"
          id="phone"
          class="form-control shadow-sm"
        />
        <div
          class="alert alert-danger mt-2"
          *ngIf="
            registerForm.get('phone')?.errors &&
            registerForm.get('phone')?.touched
          "
        >
          <p
            *ngIf="registerForm.get('phone')?.getError('required')"
            class="m-0"
          >
            Required
          </p>
          <p *ngIf="registerForm.get('phone')?.getError('pattern')" class="m-0">
            Invalid phone number
          </p>
        </div>
      </div>
      <div class="d-flex justify-content-between">
        <p class="mb-0 align-self-center">
          I have an account?
          <a [routerLink]="['/login']" class="text-main fw-semibold">Login</a>
        </p>
        <button
          class="btn d-block ms-auto shadow text-white"
          [disabled]="registerForm.invalid"
          [ngClass]="{
            'btn-success': registerForm.valid,
            'btn-danger': !registerForm.valid
          }"
        >
          <i *ngIf="isLoading" class="fa fa-spinner fa-spin-pulse"></i>
          <span *ngIf="!isLoading">Register</span>
        </button>
      </div>
      <div
        class="alert alert-danger mt-3 text-center w-75 mx-auto"
        *ngIf="apiError"
      >
        {{ apiError }}!
      </div>
    </form>
  </div>
</div>
